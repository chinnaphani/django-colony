{% extends 'base.html' %}
{% load static %}

{% block content %}
<h2 style="color: #0B294B; margin-bottom: 20px;">ðŸ’° Create Advance Payment</h2>

{% if msg %}
  <div style="padding: 12px 16px; background-color: #e7f3ff; border-left: 5px solid #007bff; border-radius: 4px; color: #0B294B; margin-bottom: 20px;">
    {{ msg }}
  </div>
{% endif %}

<form method="post" style="max-width: 600px; background-color: #fff; padding: 25px 30px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.05);">
  {% csrf_token %}
  
  <div style="display: flex; flex-direction: column; gap: 20px;">


    <div>
      <label style="font-weight: 600;">ðŸ‘¨ Member:</label>
      <select name="house_id" required style="width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #ccc;">
        <option value="">Select a house</option>
        {% for house in houses %}
          <option value="{{ house.id }}">{{ house.house_number }} - {{ house.owner_name }}</option>
        {% endfor %}
      </select>
    </div>

    <div>
      <label style="font-weight: 600;">ðŸ§¾ Fee Type:</label>
      <select name="fee_type_id" required style="width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #ccc;">
        <option value="">Select a fee type</option>
        {% for fee in fees %}
          <option value="{{ fee.id }}">{{ fee.name }}</option>
        {% endfor %}
      </select>
    </div>

    <div>
      <label style="font-weight: 600;">ðŸ“… Year:</label>
      <input type="number" name="year" value="{{ current_year }}" required style="width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #ccc;" />
    </div>

    <div>
      <label style="font-weight: 600;">ðŸ“† Months:</label>
      <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 8px;">
        {% for num, name in months %}
          <label style="display: flex; align-items: center; gap: 5px;">
            <input type="checkbox" name="months" value="{{ num }}"> {{ name }}
          </label>
        {% endfor %}
      </div>
    </div>

    <div style="margin-top: 10px;">
      <label style="display: flex; align-items: center; gap: 8px;">
        <input type="checkbox" name="mark_paid"> <strong>Mark all as Paid</strong> (Send receipt)
      </label>
    </div>

    <div>
      <button type="submit" style="
        padding: 12px 20px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 6px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: background-color 0.3s;
      " onmouseover="this.style.backgroundColor='#0056b3'" onmouseout="this.style.backgroundColor='#007bff'">
        ðŸ’¾ Create Advance Payments
      </button>
    </div>

  </div>
</form>

{% endblock %}
